(function(t){function e(e){for(var s,r,l=e[0],i=e[1],c=e[2],d=0,p=[];d<l.length;d++)r=l[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&p.push(o[r][0]),o[r]=0;for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s]);u&&u(e);while(p.length)p.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,l=1;l<a.length;l++){var i=a[l];0!==o[i]&&(s=!1)}s&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},o={app:0},n=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=i;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var s=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("v-header"),a("v-list")],1)},n=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"heading text-right mb"},[t.userInfo.username?a("div",[a("a",{attrs:{href:"javascript:;"}},[t._v(t._s(t.userInfo.username))]),a("span",[t._v(" | ")]),a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.toggle("publish")}}},[t._v("我要发表")]),a("span",[t._v(" | ")]),a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.logout(e)}}},[t._v("退出")])]):a("div",[a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.toggle("register")}}},[t._v("注册")]),a("span",[t._v(" | ")]),a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.toggle("login")}}},[t._v("登录")]),a("span",[t._v(" | ")]),a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.toggle("publish")}}},[t._v("我要发表")])])]),a("modal",{attrs:{title:"注册",show:"register"==t.modalName},on:{close:t.toggle}},[a("form",[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-3 col-form-label",attrs:{for:"reg_username"}},[t._v("用户名")]),a("div",{staticClass:"col-md-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.reg.username,expression:"reg.username"}],staticClass:"form-control",attrs:{type:"text",id:"reg_username",placeholder:"用户名"},domProps:{value:t.reg.username},on:{input:function(e){e.target.composing||t.$set(t.reg,"username",e.target.value)}}})])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-3 col-form-label",attrs:{for:"reg_password"}},[t._v("密码")]),a("div",{staticClass:"col-md-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.reg.password,expression:"reg.password"}],staticClass:"form-control",attrs:{type:"password",id:"reg_password",placeholder:"密码"},domProps:{value:t.reg.password},on:{input:function(e){e.target.composing||t.$set(t.reg,"password",e.target.value)}}})])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-3 col-form-label",attrs:{for:"reg_repassword"}},[t._v("重复密码")]),a("div",{staticClass:"col-md-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.reg.repassword,expression:"reg.repassword"}],staticClass:"form-control",attrs:{type:"password",id:"reg_repassword",placeholder:"重复密码"},domProps:{value:t.reg.repassword},on:{input:function(e){e.target.composing||t.$set(t.reg,"repassword",e.target.value)}}})])])]),a("template",{slot:"footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.regSubmit}},[t._v("注册")]),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.toggle}},[t._v("取消")]),a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.toggle("login")}}},[t._v("我有账号，立即登录")])])],2),a("modal",{attrs:{title:"登录",show:"login"==t.modalName},on:{close:t.toggle}},[a("form",[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-3 col-form-label",attrs:{for:"login_username"}},[t._v("用户名")]),a("div",{staticClass:"col-md-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.log.username,expression:"log.username"}],staticClass:"form-control",attrs:{type:"text",id:"login_username",placeholder:"用户名"},domProps:{value:t.log.username},on:{input:function(e){e.target.composing||t.$set(t.log,"username",e.target.value)}}})])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-md-3 col-form-label",attrs:{for:"login_password"}},[t._v("密码")]),a("div",{staticClass:"col-md-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.log.password,expression:"log.password"}],staticClass:"form-control",attrs:{type:"password",id:"login_password",placeholder:"密码"},domProps:{value:t.log.password},on:{input:function(e){e.target.composing||t.$set(t.log,"password",e.target.value)}}})])])]),a("template",{slot:"footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.loginSubmit}},[t._v("登录")]),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.toggle}},[t._v("取消")]),a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.toggle("register")}}},[t._v("我要注册")])])],2),a("modal",{attrs:{title:"发表",show:"publish"==t.modalName},on:{close:t.toggle}},[a("form",[a("div",{staticClass:"form-group row"},[a("div",{staticClass:"col-md-12"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.publish.title,expression:"publish.title"}],staticClass:"form-control mb",attrs:{type:"text",placeholder:"请输入标题"},domProps:{value:t.publish.title},on:{input:function(e){e.target.composing||t.$set(t.publish,"title",e.target.value)}}}),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.publish.content,expression:"publish.content"}],staticClass:"form-control",attrs:{id:"publish_username",placeholder:"发表内容……",cols:"30",rows:"10"},domProps:{value:t.publish.content},on:{input:function(e){e.target.composing||t.$set(t.publish,"content",e.target.value)}}})])])]),a("template",{slot:"footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.publishSubmit}},[t._v("发表")]),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.toggle}},[t._v("取消")])])],2)],1)},l=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"py-5 text-center"},[s("img",{staticClass:"d-block mx-auto mb-4",attrs:{src:a("5cc4")}}),s("p",{staticClass:"lead"},[t._v("\n            爱就好比骑马和学法语，如果不趁年轻时学会，以后想学会就难了。\n        ")]),s("p",{staticClass:"lead"},[t._v("\n            Love is like riding or speaking French,if you don not learn it young, it's hard to get the trick of it\n            later.\n        ")])])}],i=a("bc3a"),c=a.n(i),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal",style:{display:t.modalShow?"block":"none"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v(t._s(t.title))]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.close}},[a("span",[t._v("×")])])]),a("div",{staticClass:"modal-body"},[t._t("default")],2),a("div",{staticClass:"modal-footer"},[t._t("footer")],2)])])])},d=[],p={data:function(){return{modalShow:this.show}},props:["title","show"],watch:{show:function(){this.modalShow=this.show}},methods:{close:function(){this.modalShow=!1,this.$emit("close")}}},m=p,g=a("2877"),f=Object(g["a"])(m,u,d,!1,null,null,null),v=f.exports,h={data:function(){return{userInfo:{uid:0,username:""},modalName:"",reg:{username:"",password:""},log:{username:"",password:""},publish:{title:"",content:""}}},components:{Modal:v},created:function(){this.getUsers()},methods:{getUsers:function(){var t=this;c()({method:"post",url:"/api/getUser"}).then(function(e){0==e.data.code&&(t.userInfo.username=e.data.data.username)})},toggle:function(t){t=t||"",this.modalName=t},regSubmit:function(){var t=this;c()({method:"post",url:"/api/register",data:this.reg}).then(function(e){0==e.data.code?(alert(e.data.msg),t.modalName="login"):alert(e.data.msg)}).catch(function(t){console.log(t)})},loginSubmit:function(){var t=this;c()({method:"post",url:"/api/login",data:this.log}).then(function(e){0==e.data.code?(alert(e.data.msg),t.modalName="",t.userInfo.uid=e.data.data.id,t.userInfo.username=e.data.data.username):alert(e.data.msg)}).catch(function(t){console.log(t)})},logout:function(){c.a.post("/api/logout").then(function(t){0==t.data.code&&(alert(t.data.msg),location.href="/index.html")})},publishSubmit:function(){c()({method:"post",url:"/api/publish",data:this.publish}).then(function(t){0==t.data.code?(alert(t.data.msg),location.href="/index.html"):alert(t.data.msg)})}}},b=h,_=Object(g["a"])(b,r,l,!1,null,null,null),w=_.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"mb"},t._l(t.contents,function(e){return a("div",{key:e.id,staticClass:"list"},[a("div",{staticClass:"d-flex w-100 justify-content-between"},[a("h5",{staticClass:"mb-1"},[t._v(t._s(e.username))]),a("small",[t._v(t._s(e.created_at))])]),a("p",{staticClass:"mb-1 ml"},[t._v("\n                "+t._s(e.title)+"\n            ")]),a("p",{staticClass:"mb-1 ml"},[t._v("\n                "+t._s(e.content)+"\n            ")]),a("footer",{staticClass:"text-right"},[a("small",{on:{click:function(a){return t.like(e.id)}}},[t._v("赞（"+t._s(e.like_count)+"）")]),a("small",[t._v("回复（"+t._s(e.comment_count)+"）")]),a("a",{attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.replyToggle(e.id)}}},[t._v("我要回复")])]),t._l(e.comments,function(e){return a("div",{key:e.id,staticClass:"list"},[a("div",{staticClass:"d-flex w-100 justify-content-between"},[a("h5",{staticClass:"mb-1"},[t._v(t._s(e.username))]),a("small",[t._v(t._s(e.created_at))])]),a("p",{staticClass:"mb-1 ml"},[t._v("\n                    "+t._s(e.content)+"\n                ")])])})],2)}),0),a("div",{staticClass:"mb"},[a("ul",{staticClass:"pagination mb"},[a("li",{staticClass:"page-item",class:{disabled:1==t.page},on:{click:function(e){t.getData(Math.max(1,t.page-1))}}},[a("span",{staticClass:"page-link"},[t._v(" < ")])]),t._l(t.pages,function(e){return a("li",{key:e,staticClass:"page-item",class:{active:e==t.page},on:{click:function(a){return t.getData(e)}}},[a("span",{staticClass:"page-link"},[t._v(t._s(e))])])}),a("li",{staticClass:"page-item",class:{disabled:t.page==t.pages},on:{click:function(e){t.getData(Math.min(t.pages,t.page+1))}}},[a("span",{staticClass:"page-link"},[t._v(" > ")])])],2)]),a("modal",{attrs:{title:"回复",show:"reply"==t.modalName},on:{close:t.toggle}},[a("form",[a("div",{staticClass:"form-group row"},[a("div",{staticClass:"col-md-12"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reply.content,expression:"reply.content"}],staticClass:"form-control",attrs:{id:"reply_username",placeholder:"回复内容……",cols:"30",rows:"10"},domProps:{value:t.reply.content},on:{input:function(e){e.target.composing||t.$set(t.reply,"content",e.target.value)}}})])])]),a("template",{slot:"footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.replySubmit}},[t._v("回复")]),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.toggle}},[t._v("取消")])])],2)],1)},C=[],k=(a("ac6a"),{data:function(){return{page:1,prepage:3,pages:1,count:0,contents:[],modalName:"",reply:{content:"",content_id:""}}},components:{Modal:v},created:function(){this.getData()},methods:{getData:function(t){var e=this;t!=this.page&&(this.page=t||this.page,c()({method:"get",url:"/api/",params:{page:this.page,prepage:this.prepage}}).then(function(t){t.code||(e.count=t.data.count,e.contents=t.data.data,e.prepage=t.data.prepage,e.pages=Math.ceil(e.count/e.prepage))}))},replySubmit:function(){""==this.reply_content&&alert("内容不能为空！"),c()({method:"post",url:"/api/reply",data:this.reply}).then(function(t){var e=t.data;0==e.code?(alert(e.msg),location.href="/"):alert(e.msg)})},replyToggle:function(t){this.modalName="reply",this.reply.content_id=t},toggle:function(t){t=t||"",this.modalName=t,this.reply.content_id=""},like:function(t){var e=this;c()({method:"post",url:"/api/like",data:{content_id:t}}).then(function(a){var s=a.data;0==s.code?(alert(s.msg),e.contents.forEach(function(e){e.id===t&&(e.like_count=s.data.like_count)})):alert(s.msg)})}}}),x=k,N=Object(g["a"])(x,y,C,!1,null,null,null),j=N.exports,S={data:function(){return{}},components:{VHeader:w,VList:j}},O=S,P=Object(g["a"])(O,o,n,!1,null,null,null),$=P.exports;a("df25"),a("a2f0");s["a"].config.productionTip=!1,new s["a"]({render:function(t){return t($)}}).$mount("#app")},"5cc4":function(t,e,a){t.exports=a.p+"img/sequelize.f20cdb17.jpg"},a2f0:function(t,e,a){},df25:function(t,e,a){}});
//# sourceMappingURL=app.9c70d886.js.map